<div class='mt-3'>
  <% @comments.includes(:user, :replies).order(created_at: :desc).each do |comment| %>
    <div class="card mb-1">
      <div class="card-body">
        <h5 class="card-title"><%= comment.user.email %></h5>
        <p class="card-text"><%= comment.body %></p>
        <%= link_to "Reply",
                  new_reply_comment_path(@dream, comment),
                  class: "btn btn-primary",
                  data: { turbo_frame: comment.id } %>
        <%= turbo_frame_tag comment.id %>
      </div>
      <% if comment.replies.any? %>
        <div class="ms-5">
          <% comment.replies.each do |reply| %>
            <div class="mb-0 border-top">
              <div class="card-body">
                <h5 class="card-title"><%= reply.user.email %></h5>
                <p class="card-text"><%= reply.body %></p>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
